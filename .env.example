# =============================================================================
# OneWorld Alliance LMS - Environment Variables (Railway Deployment)
# =============================================================================
# Copy relevant values to Railway environment variables (not .env file in git!)
# =============================================================================

# ============================
# DATABASE (REQUIRED - MongoDB Atlas)
# ============================
DATABASE_URL=mongodb+srv://oneworld_user:PASSWORD@unifiedlms.lvywnng.mongodb.net/oneworld-lms?retryWrites=true&w=majority&appName=UnifiedLMS

# ============================
# SECURITY (REQUIRED - Generate NEW values for production!)
# ============================
# Generate with: openssl rand -base64 32
JWT_SECRET=generate-new-secret-do-not-reuse-old-value
SESSION_SECRET=generate-new-secret-do-not-reuse-old-value
HASH_SALT=12

# ============================
# SERVER CONFIGURATION
# ============================
NODE_ENV=production
# Railway automatically sets PORT - no need to configure
# API_PORT=4020
ENVIRONMENT=production

# ============================
# AWS S3 CONFIGURATION (Copy from old server)
# ============================
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
AWS_REGION=us-east-1
S3_BUCKET_NAME=oneworld-prod
S3_MEDIA_FOLDER_NAME=public-media

# ============================
# EMAIL SERVICE - POSTMARK (Copy from old server)
# ============================
POSTMARK_API_KEY=your-postmark-api-key
POSTMARK_FROM_EMAIL=training@oneworld.com

# ============================
# OAUTH / SSO CONFIGURATION (Copy from old server)
# ============================
OAUTH_CLIENT_ID=your-oauth-client-id
OAUTH_CLIENT_SECRET=your-oauth-client-secret
OAUTH_CALLBACK_URL=https://oneworld-lms-production.up.railway.app/sso

# OAuth URLs (OneWorld SSO)
OAUTH_AUTHORIZE_URL=https://bi-siteacceptance.oneworld.com/opass/oauth/authorize
OAUTH_TOKEN_URL=https://bi-siteacceptance.oneworld.com/opass/oauth/token
OAUTH_PROFILE_URL=https://bi-siteacceptance.oneworld.com/opass/api/profile

# ============================
# CLIENT CONFIGURATION
# ============================
CLIENT_URL=https://training.oneworld.com

# ============================
# CORS CONFIGURATION
# ============================
CORS_ALLOWED_ORIGINS=https://training.oneworld.com,https://oneworld-lms-production.up.railway.app,https://studio.apollographql.com

# ============================
# RATE LIMITING
# ============================
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MINUTES=1
ENABLE_RATE_LIMITING=true

# ============================
# LOGGING
# ============================
LOG_LEVEL=info
LOG_FORMAT=json

# ============================
# SESSION/COOKIE
# ============================
COOKIE_PREFIX=@ow
COOKIE_SECURE=true
COOKIE_HTTP_ONLY=true
COOKIE_SAME_SITE=lax

# ============================
# FEATURE FLAGS
# ============================
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_SSO=true

# =============================================================================
# NOTES FOR RAILWAY DEPLOYMENT
# =============================================================================
# 1. DO NOT commit .env file to git
# 2. Add these variables in Railway dashboard under "Variables"
# 3. Generate NEW JWT_SECRET and SESSION_SECRET (don't reuse old ones)
# 4. Update OAUTH_CALLBACK_URL to match Railway URL
# 5. Update CORS_ALLOWED_ORIGINS to include Railway URL
# 6. Verify S3 credentials work before deploying
# =============================================================================
